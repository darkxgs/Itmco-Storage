# ุฅุตูุงุญ ุตูุงุญูุงุช ุงููุฎุงุฒู ูุฅุถุงูุฉ ุตูุญุฉ ุงูุฅุตุฏุงุฑ

## ุงููุดุงูู ุงูุชู ุชู ุญููุง โ

### 1. ููุธู ุงููุฎุฒู ูุฑู ุฌููุน ุงููุฎุงุฒู ูููููู ุญุฐููุง โ

#### ุงููุดููุฉ:
- ููุธู ุงููุฎุฒู (inventory_manager) ูุงู ูุฑู **ุฌููุน ุงููุฎุงุฒู**
- ูุงู ูุณุชุทูุน **ุญุฐู ุฃู ูุฎุฒู** ุญุชู ูู ูู ููู ูุณุคููุงู ุนูู
- ูุฐุง ูุดูู ุฎุทุฑ ุนูู ุงูุจูุงูุงุช

#### ุงูุญู:
1. **ุชุตููุฉ ุงููุฎุงุฒู ุญุณุจ ุงูุตูุงุญูุงุช**:
   - Admin: ูุฑู ุฌููุน ุงููุฎุงุฒู
   - Inventory Manager: ูุฑู ููุท ุงููุฎุงุฒู ุงููุณููุญ ูู ุจุงููุตูู ุฅูููุง

2. **ุฅุฎูุงุก ุฃุฒุฑุงุฑ ุงูุฅุฏุงุฑุฉ**:
   - Admin ููุท: ููููู ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงููุฎุงุฒู
   - Inventory Manager: ุนุฑุถ ููุท (ูุง ููููู ุงูุญุฐู ุฃู ุงูุชุนุฏูู)

3. **ุงุณุชุฎุฏุงู ุฏุงูุฉ `getUserAccessibleWarehouses`**:
   ```typescript
   if (user.role === 'admin') {
     const data = await getWarehouses()
     setWarehouses(data)
   } else {
     const accessibleWarehouses = await getUserAccessibleWarehouses(user.id)
     setWarehouses(accessibleWarehouses)
   }
   ```

---

### 2. ููุธู ุงููุฎุฒู ูุง ูุณุชุทูุน ุงููุตูู ูุตูุญุฉ ุงูุฅุตุฏุงุฑ โ

#### ุงููุดููุฉ:
- ุตูุญุฉ ุงูุฅุตุฏุงุฑ ูุงูุช ูุชุงุญุฉ ููุท ูู: `admin` ู `engineer`
- ููุธู ุงููุฎุฒู (inventory_manager) ูุง ูุณุชุทูุน ุฅุตุฏุงุฑ ููุชุฌุงุช
- ูุฐุง ูููุนู ูู ุงูููุงู ุจุนููู ุงูุฃุณุงุณู

#### ุงูุญู:
- ุฅุถุงูุฉ `inventory_manager` ุฅูู ูุงุฆูุฉ ุงูุฃุฏูุงุฑ ุงููุณููุญ ููุง ุจุงููุตูู ูุตูุญุฉ ุงูุฅุตุฏุงุฑ
- ุงูุขู ุงูุฃุฏูุงุฑ ุงููุณููุญ ููุง: `admin`, `engineer`, `inventory_manager`

```typescript
{
  name: "ุงูุฅุตุฏุงุฑุงุช",
  href: "/issuance",
  icon: FileText,
  roles: ["admin", "engineer", "inventory_manager"], // โ ุชู ุฅุถุงูุฉ inventory_manager
}
```

---

## ุงูุชุญุฏูุซุงุช ุงูุชูุตูููุฉ

### ููู: `app/warehouses/page.tsx`

#### 1. ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ ุงูุตูุงุญูุงุช:
```typescript
import { useAuth } from "@/hooks/use-auth"
import { getUserAccessibleWarehouses } from "@/lib/warehouse-permissions"
```

#### 2. ุฅุถุงูุฉ user ูู useAuth:
```typescript
const { user, loading: authLoading } = useAuth()
```

#### 3. ุชุญุฏูุซ ุฏุงูุฉ loadWarehouses:
```typescript
const loadWarehouses = async () => {
  if (!user) return
  
  try {
    setLoading(true)
    
    // Admin sees all warehouses, others see only their accessible warehouses
    if (user.role === 'admin') {
      const data = await getWarehouses()
      setWarehouses(data)
    } else {
      const accessibleWarehouses = await getUserAccessibleWarehouses(user.id)
      setWarehouses(accessibleWarehouses)
    }
  } catch (error) {
    console.error("Error loading warehouses:", error)
    toast.error("ูุดู ูู ุชุญููู ุงููุฎุงุฒู")
  } finally {
    setLoading(false)
  }
}
```

#### 4. ุฅุถุงูุฉ ุฏุงูุฉ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช:
```typescript
const canManageWarehouses = () => {
  return user?.role === 'admin'
}
```

#### 5. ุฅุฎูุงุก ุฒุฑ "ุฅุถุงูุฉ ูุฎุฒู" ูุบูุฑ ุงูู Admin:
```typescript
{canManageWarehouses() && (
  <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>
    <DialogTrigger asChild>
      <Button>
        <Plus className="h-4 w-4 ml-2" />
        ุฅุถุงูุฉ ูุฎุฒู ุฌุฏูุฏ
      </Button>
    </DialogTrigger>
    ...
  </Dialog>
)}
```

#### 6. ุฅุฎูุงุก ุฃุฒุฑุงุฑ ุงูุชุนุฏูู ูุงูุญุฐู:
```typescript
<TableCell className="text-center w-[120px]">
  <div className="flex items-center gap-2">
    {canManageWarehouses() ? (
      <>
        <Button onClick={() => handleEdit(warehouse)}>
          <Edit className="h-4 w-4" />
        </Button>
        <Button onClick={() => handleDelete(warehouse.id)}>
          <Trash2 className="h-4 w-4" />
        </Button>
      </>
    ) : (
      <span className="text-slate-500 text-sm">ุนุฑุถ ููุท</span>
    )}
  </div>
</TableCell>
```

### ููู: `components/sidebar.tsx`

#### ุชุญุฏูุซ ุตูุงุญูุงุช ุตูุญุฉ ุงูุฅุตุฏุงุฑ:
```typescript
{
  name: "ุงูุฅุตุฏุงุฑุงุช",
  href: "/issuance",
  icon: FileText,
  roles: ["admin", "engineer", "inventory_manager"], // โ ุชู ุฅุถุงูุฉ inventory_manager
}
```

---

## ููุงุฑูุฉ ูุจู ูุจุนุฏ

### ูุจู ุงูุชุญุฏูุซ:

#### ุตูุญุฉ ุงููุฎุงุฒู:
```
โ Inventory Manager ูุฑู ุฌููุน ุงููุฎุงุฒู
โ ููููู ุญุฐู ุฃู ูุฎุฒู
โ ููููู ุชุนุฏูู ุฃู ูุฎุฒู
โ ููููู ุฅุถุงูุฉ ูุฎุงุฒู ุฌุฏูุฏุฉ
```

#### ุตูุญุฉ ุงูุฅุตุฏุงุฑ:
```
โ Inventory Manager ูุง ูุณุชุทูุน ุงููุตูู
โ ูุง ูุธูุฑ ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
โ ูุง ููููู ุฅุตุฏุงุฑ ููุชุฌุงุช
```

### ุจุนุฏ ุงูุชุญุฏูุซ:

#### ุตูุญุฉ ุงููุฎุงุฒู:
```
โ Admin ูุฑู ุฌููุน ุงููุฎุงุฒู
โ Inventory Manager ูุฑู ููุท ูุฎุงุฒูู
โ Admin ููุท ููููู ุงูุญุฐู/ุงูุชุนุฏูู/ุงูุฅุถุงูุฉ
โ Inventory Manager: ุนุฑุถ ููุท
```

#### ุตูุญุฉ ุงูุฅุตุฏุงุฑ:
```
โ Inventory Manager ูุณุชุทูุน ุงููุตูู
โ ูุธูุฑ ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
โ ููููู ุฅุตุฏุงุฑ ููุชุฌุงุช ูู ูุฎุงุฒูู
```

---

## ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

### Admin (ุงููุฏูุฑ):
- โ ูุฑู ุฌููุน ุงููุฎุงุฒู
- โ ููููู ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงููุฎุงุฒู
- โ ููููู ุงููุตูู ูุฌููุน ุงูุตูุญุงุช
- โ ููููู ุฅุตุฏุงุฑ ููุชุฌุงุช ูู ุฃู ูุฎุฒู

### Inventory Manager (ูุฏูุฑ ุงููุฎุฒู):
- โ ูุฑู ููุท ุงููุฎุงุฒู ุงููุณููุญ ูู ุจูุง
- โ ูุง ููููู ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงููุฎุงุฒู
- โ ููููู ุนุฑุถ ุงููุฎุงุฒู ููุท
- โ ููููู ุฅุตุฏุงุฑ ููุชุฌุงุช ูู ูุฎุงุฒูู
- โ ููููู ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช ูู ูุฎุงุฒูู

### Engineer (ุงููููุฏุณ):
- โ ููููู ุฅุตุฏุงุฑ ููุชุฌุงุช
- โ ููููู ุงูุจุญุซ ุนู ุงูููุชุฌุงุช
- โ ูุง ููููู ุฅุฏุงุฑุฉ ุงููุฎุงุฒู
- โ ูุง ููููู ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช

---

## ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุณููุงุฑูู 1: ููุธู ูุฎุฒู ุงููุงูุฑุฉ
```
ุงููุณุชุฎุฏู: ุฃุญูุฏ (inventory_manager)
ุงููุฎุฒู ุงููุณุคูู ุนูู: ูุฎุฒู ุงููุงูุฑุฉ

โ ูุฑู: ูุฎุฒู ุงููุงูุฑุฉ ููุท
โ ูุง ูุฑู: ูุฎุฒู ุงูุฅุณููุฏุฑูุฉุ ูุฎุฒู ุงูุฌูุฒุฉ
โ ููููู: ุฅุตุฏุงุฑ ููุชุฌุงุช ูู ูุฎุฒู ุงููุงูุฑุฉ
โ ููููู: ุฅุฏุงุฑุฉ ููุชุฌุงุช ูุฎุฒู ุงููุงูุฑุฉ
โ ูุง ููููู: ุญุฐู ูุฎุฒู ุงููุงูุฑุฉ
โ ูุง ููููู: ุชุนุฏูู ุจูุงูุงุช ุงููุฎุฒู
```

### ุณููุงุฑูู 2: ุงููุฏูุฑ ุงูุนุงู
```
ุงููุณุชุฎุฏู: ูุญูุฏ (admin)
ุงูุตูุงุญูุงุช: ูุงููุฉ

โ ูุฑู: ุฌููุน ุงููุฎุงุฒู
โ ููููู: ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุฃู ูุฎุฒู
โ ููููู: ุฅุตุฏุงุฑ ููุชุฌุงุช ูู ุฃู ูุฎุฒู
โ ููููู: ุฅุฏุงุฑุฉ ุฌููุน ุงูููุชุฌุงุช
โ ููููู: ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช
```

### ุณููุงุฑูู 3: ุงููููุฏุณ
```
ุงููุณุชุฎุฏู: ุนูู (engineer)
ุงูุตูุงุญูุงุช: ูุญุฏูุฏุฉ

โ ููููู: ุฅุตุฏุงุฑ ููุชุฌุงุช
โ ููููู: ุงูุจุญุซ ุนู ุงูููุชุฌุงุช
โ ูุง ููููู: ุฑุคูุฉ ุตูุญุฉ ุงููุฎุงุฒู
โ ูุง ููููู: ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
โ ูุง ููููู: ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
```

---

## ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ููุธู ุงููุฎุฒู ูุฑู ููุท ูุฎุงุฒูู
1. โ ุชุณุฌูู ุงูุฏุฎูู ูู inventory_manager
2. โ ุงูุฐูุงุจ ูุตูุญุฉ ุงููุฎุงุฒู
3. โ ุงูุชุญูู ูู ุฑุคูุฉ ุงููุฎุงุฒู ุงููุณููุญ ุจูุง ููุท
4. โ ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฒุฑุงุฑ ุญุฐู/ุชุนุฏูู

### ุงุฎุชุจุงุฑ 2: ููุธู ุงููุฎุฒู ููููู ุงูุฅุตุฏุงุฑ
1. โ ุชุณุฌูู ุงูุฏุฎูู ูู inventory_manager
2. โ ุงูุชุญูู ูู ุธููุฑ "ุงูุฅุตุฏุงุฑุงุช" ูู ุงููุงุฆูุฉ
3. โ ุงูุฐูุงุจ ูุตูุญุฉ ุงูุฅุตุฏุงุฑ
4. โ ุฅุตุฏุงุฑ ููุชุฌ ูู ูุฎุฒูู
5. โ ุงูุชุญูู ูู ูุฌุงุญ ุงูุนูููุฉ

### ุงุฎุชุจุงุฑ 3: Admin ููููู ูู ุดูุก
1. โ ุชุณุฌูู ุงูุฏุฎูู ูู admin
2. โ ุฑุคูุฉ ุฌููุน ุงููุฎุงุฒู
3. โ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ูุฎุฒู
4. โ ุฅุตุฏุงุฑ ููุชุฌุงุช ูู ุฃู ูุฎุฒู

---

## ุงูููุงุฆุฏ

### ููุฃูุงู:
- ๐ ููุน ููุธูู ุงููุฎุงุฒู ูู ุญุฐู ุงููุฎุงุฒู
- ๐ ูู ููุธู ูุฑู ููุท ูุง ูุฎุตู
- ๐ ุชูููู ุงุญุชูุงููุฉ ุงูุฃุฎุทุงุก

### ููููุงุกุฉ:
- โก ููุธู ุงููุฎุฒู ููููู ุงูุฅุตุฏุงุฑ ูุจุงุดุฑุฉ
- โก ูุงุฌูุฉ ุฃุจุณุท (ูุฑู ููุท ูุฎุงุฒูู)
- โก ุชูููู ุงูุงุฑุชุจุงู

### ููุฅุฏุงุฑุฉ:
- ๐ ุชุญูู ูุงูู ููู Admin
- ๐ ุตูุงุญูุงุช ูุงุถุญุฉ ููู ุฏูุฑ
- ๐ ุณูููุฉ ุงููุชุงุจุนุฉ ูุงููุฑุงูุจุฉ

---

## ููุงุญุธุงุช ูููุฉ

1. **ุตูุงุญูุงุช ุงููุฎุงุฒู**:
   - ูุชู ุชุญุฏูุฏูุง ูู ุตูุญุฉ "ุตูุงุญูุงุช ุงููุฎุงุฒู"
   - Admin ููููู ููุญ/ุฅุฒุงูุฉ ุงูุตูุงุญูุงุช
   - ุงูุตูุงุญูุงุช ุชุดูู: view, add, edit, delete

2. **ุตูุญุฉ ุงูุฅุตุฏุงุฑ**:
   - ูุชุงุญุฉ ุงูุขู ูู: admin, engineer, inventory_manager
   - ูู ูุณุชุฎุฏู ูุฑู ุงูููุชุฌุงุช ูู ูุฎุงุฒูู ููุท
   - ุงูุฅุตุฏุงุฑ ูุชู ูู ุงููุฎุงุฒู ุงููุณููุญ ุจูุง

3. **ุงูุฃูุงู**:
   - ุฌููุน ุงูุนูููุงุช ูุญููุฉ ุจุงูุตูุงุญูุงุช
   - ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูู Backend ุฃูุถุงู
   - ูุง ูููู ุชุฌุงูุฒ ุงูุตูุงุญูุงุช ูู Frontend

---

## ุงููุณุชูุจู

### ุชุญุณููุงุช ููุชุฑุญุฉ:
- [ ] ุฅุถุงูุฉ ุณุฌู ููุนูููุงุช (Audit Log)
- [ ] ุฅุดุนุงุฑุงุช ุนูุฏ ูุญุงููุฉ ุงููุตูู ุบูุฑ ุงููุตุฑุญ
- [ ] ุชูุงุฑูุฑ ุงูุตูุงุญูุงุช ูุงููุตูู
- [ ] ุตูุงุญูุงุช ุฃูุซุฑ ุชูุตููุงู (ูุซู: view only products)
- [ ] ุฅููุงููุฉ ุชูููุถ ุงูุตูุงุญูุงุช ูุคูุชุงู